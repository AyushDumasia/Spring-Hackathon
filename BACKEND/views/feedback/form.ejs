<%- include("../includes/navbar.ejs") %>
    <link rel="stylesheet" href="/css/feedback.css">
    <link rel="stylesheet" href="/css/review.css">
    <title>Feedback Form !</title>
    </head>

    <body>
        <%- include("../flash/success.ejs") %>
        <%- include("../flash/failure.ejs") %>
        <div class="feedback-form-container">
            <form action="/home/feedback" method="POST">
                <fieldset class="starability-basic">
                    <legend>Rating:</legend>
                    <input type="radio" id="no-rate" class="input-no-rate" name="rating" value="0" checked
                        aria-label="No rating." />
                    <input type="radio" id="first-rate1" name="rating" value="1" />
                    <label for="first-rate1" title="Terrible">1 star</label>
                    <input type="radio" id="first-rate2" name="rating" value="2" />
                    <label for="first-rate2" title="Not good">2 stars</label>
                    <input type="radio" id="first-rate3" name="rating" value="3" />
                    <label for="first-rate3" title="Average">3 stars</label>
                    <input type="radio" id="first-rate4" name="rating" value="4" />
                    <label for="first-rate4" title="Very good">4 stars</label>
                    <input type="radio" id="first-rate5" name="rating" value="5" />
                    <label for="first-rate5" title="Amazing">5 stars</label>
                </fieldset>
                <div class="comment-section-container">
                    <label for="comment">Comment : </label>
                    <br>
                    <textarea name="comment" id="comment" cols="50" rows="2" required></textarea>
                </div>
                <button class="sub-btn-feedback">Submit Feedback</button>
            </form>
        </div>

        <div class="feedback-container">
            <!-- <div> -->
            <%for(let feedbacks of feedback) {%>
                <div class="feedback-card">
                    <% if(feedbacks.author) { %>
                        <h2 class="feedback-heading">
                            <%= feedbacks.author.username %>
                        </h2>
                    <% } else { %>
                        <h2 class="feedback-heading">User not found</h2>
                    <% } %>
                    
                    <hr />
                    <br>
                    <div class="feedback-comment">
                        <p>
                            <%=feedbacks.comment %>
                        </p>
                    </div>
                    <p class="date">Reviewed On <%= feedbacks.Created_At.toLocaleDateString('en-US', { day: 'numeric'
                            ,month: 'numeric' , year : 'numeric' })%>
                    </p>
                    <div class="feedback-rating-star">
                        <p class="starability-result" data-rating="<%= feedbacks.rating%>">
                        </p>
                    </div>
                </div>
                <%}%>
                    <!-- </div> -->
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
            <path fill="#0099ff" fill-opacity="1" d="M0,0L48,21.3C96,43,192,85,288,101.3C384,117,480,107,576,106.7C672,107,768,117,864,133.3C960,149,1056,171,1152,160C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
          </svg>
    </body>
    </html>